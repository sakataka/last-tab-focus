# Last Tab Focus Chrome拡張機能

タブを閉じた時に、直前にフォーカスしていたタブにフォーカスを移すChrome拡張機能

## 機能概要

- タブのフォーカス履歴を管理
- タブクローズ時に、最後にフォーカスしていたタブに自動でフォーカス
- 複数タブのフォーカス順序を記憶し、クローズのたびに履歴をたどる

## 技術仕様

### Chrome拡張機能の基本構造

- `manifest.json` - 拡張機能の設定ファイル（Manifest V3）
- `background.js` - バックグラウンドサービスワーカー
- `icons/` - 拡張機能のアイコン

### 使用API

- `chrome.tabs` API - タブの操作と監視
- `chrome.windows` API - ウィンドウ情報の取得

### 実装アプローチ

1. **タブフォーカス履歴の管理**
   - タブがアクティブになったときに履歴に記録
   - 配列で順序を管理（最新が先頭）

2. **タブクローズイベントの処理**
   - `chrome.tabs.onRemoved` イベントでタブクローズを検知
   - クローズされたタブが現在アクティブな場合、履歴から次のタブを選択

3. **データ構造**
   ```javascript
   // タブID配列で履歴管理
   let tabHistory = [currentTabId, previousTabId, ...]
   ```

### 主要な処理フロー

1. タブがアクティブになる → 履歴の先頭に追加
2. タブがクローズされる → 履歴から削除、必要に応じて次のタブにフォーカス
3. 履歴が空/無効な場合 → デフォルトのChrome動作に委ねる

## 開発方針

- できるだけシンプルな実装
- Chrome最新版を対象
- 一般公開を目標